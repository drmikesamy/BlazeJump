@using BlazeJump.Client.Models;

<div class="box">
	@if (Message.ParentNEvent?.Sig != null)
	{
		<MessageCard Message=Message.ParentNEvent></MessageCard>
	}
	<div class="card box">
		<div class="profile-picture">
			<img src="@($"images/profilepics/{Message.User?.ProfilePic ?? ""}.png")" alt="profile picture">
		</div>
        <div class="card-body">
            <h3>
                @(Message.Pubkey ?? "")
            </h3>
            <p>@(Message.Content ?? "")</p>
            <p>
                @(Message.CreatedAtDateTime)
                @foreach (var reaction in Message.Reactions.GroupBy(r => r.Content))
                {
                    @($"  {reaction.FirstOrDefault()?.Content} {reaction.Count()}")
                }
            </p>
        </div>
	</div>
</div>

@code {
	[Parameter]
	public NEvent Message { get; set; }
}